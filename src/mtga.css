:root {
  /* Colors */
  --bg-base:#0C0F14;
  --bg-panel:#131821;
  --bg-muted:#1A2130;
  --bg-elevated:#0E131B;
  --fg-primary:#E6EEF7;
  --fg-secondary:#BBD0E4;
  --fg-muted:#8BA3B8;
  --fg-inverted:#0C0F14;
  --accent:#13B9D5;
  --accent-600:#0FA3BA;
  --accent-700:#0C8EA2;
  --ok:#3CCB7F;
  --warn:#FFD166;
  --error:#EF476F;
  --info:#4DA3FF;
  --border-subtle:#233045;
  --border-focus:#13B9D5;
  --border-separator:#1F2A3C;
  --overlay-scrim:rgba(0,0,0,0.6);

  /* Type */
  --font-ui:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Helvetica Neue',Arial,'Noto Sans','Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji',sans-serif;
  --font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,'Liberation Mono','Courier New',monospace;
  --fs-xs:12px; --fs-sm:14px; --fs-md:16px; --fs-lg:18px; --fs-xl:22px; --fs-h1:28px; --fs-h2:22px; --fs-h3:18px;
  --lh-tight:1.25; --lh-normal:1.45; --lh-relaxed:1.6;

  /* Radius, spacing, shadow */
  --radius-sm:8px; --radius-md:12px; --radius-lg:16px; --radius-pill:999px;
  --space-0:0; --space-1:4px; --space-2:8px; --space-3:12px; --space-4:16px; --space-5:20px; --space-6:24px; --space-7:28px; --space-8:32px;
  --shadow-sm:0 1px 2px rgba(0,0,0,0.35);
  --shadow-md:0 6px 20px rgba(0,0,0,0.35);
  --shadow-lg:0 12px 32px rgba(0,0,0,0.45);

  /* Z and motion */
  --z-dropdown:1000; --z-modal:1100; --z-toast:1200; --z-overlay:1300;
  --motion-fast:120ms; --motion-base:180ms; --motion-slow:240ms; --motion-curve:cubic-bezier(0.25,0.1,0.25,1);
}

* { box-sizing: border-box; }
html, body { height:100%; }
body {
  margin:0; background:var(--bg-base); color:var(--fg-primary);
  font-family:var(--font-ui); font-size:var(--fs-md); line-height:var(--lh-normal);
}

a { color: var(--accent); text-decoration: none; }
a:hover { text-decoration: underline; }

/* Headings */
h1 { font-size: var(--fs-h1); line-height: var(--lh-tight); margin: var(--space-6) 0 var(--space-3); }
h2 { font-size: var(--fs-h2); line-height: var(--lh-tight); margin: var(--space-5) 0 var(--space-2); }
h3 { font-size: var(--fs-h3); line-height: var(--lh-tight); margin: var(--space-4) 0 var(--space-2); }

/* Utilities */
.mono { font-family: var(--font-mono); }
.muted { color: var(--fg-muted); }
.row { display:flex; gap: var(--space-3); align-items: center; }
.col { display:flex; flex-direction: column; gap: var(--space-3); }
.gap-2 { gap: var(--space-2); }
.gap-3 { gap: var(--space-3); }
.p-3 { padding: var(--space-3); } .p-4 { padding: var(--space-4); } .p-5 { padding: var(--space-5); }
.mt-3 { margin-top: var(--space-3); } .mb-3 { margin-bottom: var(--space-3); }
.w-full { width: 100%; }

/* Components */
.card {
  background: var(--bg-panel);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
}
.card-header { padding: var(--space-4); border-bottom: 1px solid var(--border-separator); font-weight: 600; }
.card-body { padding: var(--space-4); }
.card-actions { padding: var(--space-3); border-top: 1px solid var(--border-separator); display:flex; gap: var(--space-3); justify-content: flex-end; }

.button {
  --btn-bg: var(--accent);
  --btn-fg: var(--fg-inverted);
  --btn-bg-hover: var(--accent-600);
  --btn-bg-active: var(--accent-700);
  display:inline-flex; align-items:center; justify-content:center;
  padding: 10px 16px; border-radius: var(--radius-md);
  background: var(--btn-bg); color: var(--btn-fg);
  border: 1px solid transparent; cursor: pointer; user-select: none;
  transition: background var(--motion-base) var(--motion-curve), transform var(--motion-fast) var(--motion-curve), border-color var(--motion-fast) var(--motion-curve);
  font-weight: 600;
}
.button:hover { background: var(--btn-bg-hover); }
.button:active { background: var(--btn-bg-active); transform: translateY(1px); }
.button.ghost { background: transparent; color: var(--fg-primary); border-color: var(--border-subtle); }
.button.ghost:hover { border-color: var(--accent); color: var(--accent); }
.button.danger { --btn-bg: var(--error); --btn-bg-hover:#D83C62; --btn-bg-active:#C13558; }
.button.ok { --btn-bg: var(--ok); --btn-bg-hover:#34B872; --btn-bg-active:#2EA864; }
.button:disabled { opacity:.6; cursor:not-allowed; }

.input, .select, .textarea {
  width: 100%; background: var(--bg-elevated); color: var(--fg-primary);
  border: 1px solid var(--border-subtle); border-radius: var(--radius-md); padding: 10px 12px;
  transition: border-color var(--motion-fast) var(--motion-curve), box-shadow var(--motion-fast) var(--motion-curve);
}
.input:focus, .select:focus, .textarea:focus {
  outline: none; border-color: var(--border-focus); box-shadow: 0 0 0 3px rgba(19,185,213,0.25);
}

.checkbox { width: 18px; height: 18px; accent-color: var(--accent); }

.badge {
  display:inline-flex; align-items:center; gap:6px; padding:2px 8px; border-radius: var(--radius-pill);
  font-size: var(--fs-sm); border: 1px solid var(--border-subtle); background: var(--bg-muted);
}
.badge.ok { color: var(--fg-primary); border-color: rgba(60,203,127,.35); background: rgba(60,203,127,.12); }
.badge.warn { border-color: rgba(255,209,102,.35); background: rgba(255,209,102,.12); }
.badge.error{ border-color: rgba(239,71,111,.35); background: rgba(239,71,111,.12); }
.badge.info { border-color: rgba(77,163,255,.35); background: rgba(77,163,255,.12); }

.progress {
  height: 8px; background: #0B1119; border-radius: var(--radius-pill); overflow: hidden; border: 1px solid var(--border-subtle);
}
.progress > .bar {
  height: 100%; width: 0%;
  background: linear-gradient(90deg, var(--accent), var(--accent-700));
  transition: width var(--motion-base) var(--motion-curve);
}

.table { width: 100%; border-collapse: collapse; font-size: var(--fs-sm); }
.table th, .table td { padding: 10px 12px; border-bottom: 1px solid var(--border-separator); }
.table th { text-align: left; color: var(--fg-secondary); font-weight: 600; }
.table td.num { text-align: right; font-variant-numeric: tabular-nums; }

.dialog-overlay { position: fixed; inset: 0; background: var(--overlay-scrim); display:none; z-index: var(--z-overlay); }
.dialog { position: fixed; inset: 0; display:none; align-items: center; justify-content: center; z-index: var(--z-modal); }
.dialog.open, .dialog-overlay.open { display: flex; }
.dialog .panel { background: var(--bg-panel); border: 1px solid var(--border-subtle); border-radius: var(--radius-lg); box-shadow: var(--shadow-lg); width: min(640px, 92vw); }
.dialog .panel .panel-body { padding: var(--space-4); }
.dialog .panel .panel-actions { padding: var(--space-3); border-top:1px solid var(--border-separator); display:flex; justify-content:flex-end; gap:var(--space-3); }

.tabs { display:flex; gap: var(--space-1); border-bottom:1px solid var(--border-separator); }
.tab { padding:10px 12px; border-bottom:2px solid transparent; color: var(--fg-muted); cursor: pointer; }
.tab.active { color: var(--fg-primary); border-color: var(--accent); }

/* MTGA specifics */
.grid-overlay { outline: 1px dashed var(--accent-600); outline-offset: -1px; }
.handle { width: 14px; height: 14px; border-radius: var(--radius-pill); background: var(--accent); border:2px solid var(--bg-panel); box-shadow: var(--shadow-sm); cursor: grab; }
.handle:active { cursor: grabbing; }
.rhombus-overlay { outline: 2px solid rgba(60,203,127,.6); background: rgba(60,203,127,.1); }
.score-bar { height: 4px; border-radius: var(--radius-pill); background: #0B1119; overflow: hidden; }
.score-bar > span { display:block; height:100%; width:0%; background: var(--ok); transition: width var(--motion-base) var(--motion-curve); }

/* High contrast */
@media (prefers-contrast: more) {
  .button { border-color: var(--accent-700); }
  .input, .select, .textarea { border-color: var(--accent-700); }
}
/* Animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}
@keyframes slideInUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.animate-fadeIn { animation: fadeIn var(--motion-base) var(--motion-curve); }
.animate-scaleIn { animation: scaleIn var(--motion-base) var(--motion-curve); }
.animate-slideInUp { animation: slideInUp var(--motion-base) var(--motion-curve); }
.animate-pulse { animation: pulse 2s ease-in-out infinite; }

/* Transition utilities */
.transition-fast { transition: all var(--motion-fast) var(--motion-curve); }
.transition-base { transition: all var(--motion-base) var(--motion-curve); }
.transition-slow { transition: all var(--motion-slow) var(--motion-curve); }

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  * { transition-duration: 1ms !important; animation-duration: 1ms !important; }
}